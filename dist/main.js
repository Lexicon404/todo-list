(()=>{"use strict";let t=[];function e(t){let e;try{e=window[t];const n="__storage_test__";return e.setItem(n,n),e.removeItem(n),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}}function n(){e("localStorage")?t=JSON.parse(window.localStorage.getItem("todo")):console.log("No Storage on browser")}function o(){e("localStorage")?(window.localStorage.setItem("todo",JSON.stringify(t)),console.log("push to local storage"),console.log(JSON.parse(window.localStorage.getItem("todo")))):console.log("No Storage on browser"),n()}function d(t){const e=((t,e=[])=>({project:t,task:e}))(t);return e}function c(t,e){const n=((t,e)=>({task:t,date:e}))(t,e);return n}function i(e,n){t.find((t=>t.project===e)).task.push(n)}function l(e){t.some((t=>t.project===e.project))?console.log("duplicate entry not pushed"):t.push(e)}function a(e){return t.findIndex((t=>t.project.match(e)))}function r(e){return t[e].project}function s(){const t=new Date;let e=t.getDate(),n=t.getMonth()+1;return n<10&&(n="0"+n),e<10&&(e="0"+e),`${t.getFullYear()}-${n}-${e}`}const u=d("projectOne"),p=d("projectTwo"),m=d("projectThree"),f=d("projectFour"),E=d("All Todos"),g=c("taskOne"),h=c("taskOneOne"),k=c("taskTwo"),y=c("task To do 1","2023-01-25"),C=c("task To do 2","2023-01-26"),v=c("task To do 3","2023-01-27");function j(t,e,n,o){const d=document.createElement(t);return d.setAttribute(e,n),d.textContent=o,d}function b(e){const n=document.getElementById("tasks"),o=document.getElementById("project-title"),d=document.getElementById("edit-button");o.textContent=e,n.textContent="",d.textContent="";let l=function(e){const n=t.findIndex((t=>t.project.match(e))),o=t[n].task;return{taskArray:o,getTaskIndex:function(t){return o.findIndex((e=>e.task.match(t)))}}}(e);for(let t=0;t<l.taskArray.length;t++){const o=document.createElement("div"),d=`${a(e)}-${t}`;o.setAttribute("id",d);const c=document.createElement("div"),i=document.createElement("div");c.textContent=l.taskArray[t].task,i.textContent=l.taskArray[t].date,o.appendChild(c),o.appendChild(i),n.appendChild(o),B(d),L(d),D(d)}"All Todos"!==e&&(function(t){const e=document.getElementById("project-title"),n=j("button","id",`edit-project-${a(e.innerText)}`,"Edit");n.setAttribute("class","edit-button"),t.appendChild(n);const o=document.querySelectorAll(".edit-button");Array.from(o).forEach((function(t){t.addEventListener("click",(t=>{x(e,e.innerText)}))}))}(d),function(e){const n=a(document.getElementById("project-title").innerText),o=j("button","id",`delete-project-${n}`,"Delete");o.setAttribute("class","delete-project"),e.appendChild(o),o.addEventListener("click",(e=>{!function(e){let n=t.findIndex((t=>t.project===e));t.splice(n,1)}(r(n)),w("All Todos"),T()}))}(d)),function(t){const e=document.getElementById("tasks"),n=j("form","action","./"),o=j("input","type","text"),d=j("input","type","date"),l=j("input","type","submit");n.appendChild(o),n.appendChild(d),n.appendChild(l),e.appendChild(n),l.addEventListener("click",(()=>{event.preventDefault(),i(t,c(o.value,d.value)),w(t)}))}(e)}function A(t){const e=document.getElementById("add-new"),n=j("form","action","./"),c=j("input","type","text"),i=j("input","type","submit");c.setAttribute("value",t),n.appendChild(c),n.appendChild(i),e.appendChild(n),i.addEventListener("click",(()=>{event.preventDefault(),l(d(c.value)),o(),T()}))}function I(){const e=document.getElementById("add-new");let n=t.map((t=>t.project));for(let t=0;t<n.length;t++)if("All Todos"!==n[t]){const o=document.createElement("div"),d=j("button","id",`project-${t}`,n[t]);d.setAttribute("class","project-button"),o.appendChild(d),e.appendChild(o)}const o=document.querySelectorAll(".project-button");Array.from(o).forEach((function(t){t.addEventListener("click",(t=>{b(r(t.target.id.replace("project-","")))}))}))}function x(e,n){const o=j("form","action","./"),d=j("input","type","text"),c=j("input","type","submit");d.setAttribute("value",n),o.appendChild(d),o.appendChild(c),e.appendChild(o),c.addEventListener("click",(()=>{event.preventDefault();const e=n,o=d.value;!function(e,n){return t.some((t=>t.project===n))?(alert("This project name already exist"),console.log("duplicate entry not pushed"),!1):(t.find((t=>t.project===e)).project=n,!0)}(e,o)?w(e):w(o),T()}))}function T(){document.getElementById("add-new").innerHTML="",A(""),I()}function w(t){o(),b(t)}function B(e){const n=document.getElementById(e),o=j("button","class","edit-task-button","Edit");n.appendChild(o),o.addEventListener("click",(e=>{const o=e.target.parentElement.firstChild.innerText;!function(e,n){const o=j("form","action","./"),d=j("input","type","text"),c=j("input","type","submit");d.setAttribute("value",n),o.appendChild(d),o.appendChild(c),e.appendChild(o),c.addEventListener("click",(e=>{e.preventDefault();const n=d.value,o=e.target.parentElement.parentElement.id.split("-"),c=r(o[0]);!function(e,n,o){t.find((t=>t.project===e)).task[n].task=o}(c,o[1],n),w(c),T()}))}(n,o)}),{once:!0})}function L(e){const n=document.getElementById(e),o=j("button","class","edit-date-button","Edit Date");n.appendChild(o),o.addEventListener("click",(e=>{!function(e){const n=j("form","action","./"),o=j("input","type","date"),d=j("input","type","submit");n.appendChild(o),n.appendChild(d),e.appendChild(n),d.addEventListener("click",(e=>{e.preventDefault();const n=o.value,d=e.target.parentElement.parentElement.id.split("-"),c=r(d[0]);!function(e,n,o){t.find((t=>t.project===e)).task[n].date=o}(c,d[1],n),w(c),T()}))}(n)}),{once:!0})}function D(e){const n=document.getElementById(e),o=j("button","class","delete-task-button","Delete Task");n.appendChild(o),o.addEventListener("click",(e=>{const n=e.target.parentElement.id.split("-"),o=r(n[0]);!function(e,n){t.find((t=>t.project===e)).task.splice(n,1)}(o,n[1]),w(o),T()}))}l(u),l(p),l(m),l(f),l(E),i("projectOne",g),i("projectOne",h),i("projectTwo",k),i("All Todos",y),i("All Todos",C),i("All Todos",v),n(),function(){const e=document.getElementById("all-button"),n=document.getElementById("today-button"),o=document.getElementById("week-button");e.addEventListener("click",(()=>b("All Todos"))),n.addEventListener("click",(()=>function(){const e=document.getElementById("tasks"),n=document.getElementById("project-title"),o=document.getElementById("edit-button");n.textContent="Today's Agenda",e.textContent="",o.textContent="";for(let e=0;e<t.length;e++)for(let n=0;n<t[e].task.length;n++)t[e].task[n].date===s()&&d(e,n);function d(n,o){const d=document.createElement("div"),c=`${n}-${o}`;d.setAttribute("id",c);const i=document.createElement("div"),l=document.createElement("div");i.textContent=`${t[n].project} - ${t[n].task[o].task}`,l.textContent=t[n].task[o].date,d.appendChild(i),d.appendChild(l),e.appendChild(d),B(c),L(c),D(c)}}())),o.addEventListener("click",(()=>console.log("week button")))}(),A("add new project"),I()})();